!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.locallyjs=f()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function parse(str){if(str=""+str,!(str.length>1e4)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function short(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){return n>ms?void 0:1.5*n>ms?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(val,options){return options=options||{},"string"==typeof val?parse(val):options["long"]?long(val):short(val)}},{}],2:[function(require,module,exports){"use strict";!function(){function _remove(key){ls.removeItem(key),_keys.splice(_keys.indexOf(key),1),this.length=_keys.length}function _saveConfig(){return ls.setItem("locally-config",JSON.stringify(_config)),!0}function _get(key){if("undefined"==typeof key||!_config[key])return null;if(_config[key].ttl<Date.now())return delete _config[key],_saveConfig(),_remove(key),null;var value=ls.getItem(key),temp;switch(_config[key].t){case"o":return JSON.parse(value);case"d":return new Date(parseInt(value,10));case"r":return new RegExp(value.substring(1,value.length-1));case"f":return eval("temp = "+value),temp;case"n":return Number(value);case"s":return String(value);case"b":return"1"==value}return value}var ls=localStorage,ms=require("ms");ls||(ls={_data:{},setItem:function(id,val){return this._data[id]=String(val)},getItem:function(id){return this._data.hasOwnProperty(id)?this._data[id]:void 0},removeItem:function(id){return delete this._data[id]},key:function key(index){for(var key in this_data)if(!index--)return key},clear:function(){return this._data={}}});var utils={each:function(arr,iteratee){for(var l=arr.length;l--;)iteratee(arr[l],l)},map:function(arr,iteratee){for(var newArr=new Array(arr.length),l=arr.length;l--;)newArr[l]=iteratee(arr[l],l);return newArr},filter:function(arr,iteratee){for(var newArr=[],l=arr.length;l--;)iteratee(arr[l],l)&&newArr.push(iteratee);return newArr}},_keys,_config,Locally=function(){if(_config=ls.getItem("locally-config")){_config=JSON.parse(_config);for(var l=ls.length,keys=new Array(l);l--;)keys[l]=ls.key(l),_config[keys[l]]=_config[keys[l]]||{};keys.splice(keys.indexOf("locally-config"),1),_keys=keys,this.length=_keys.length}else _config={},_keys=[],this.length=0;_saveConfig=_saveConfig.bind(this),_remove=_remove.bind(this),_get=_get.bind(this),_saveConfig()};Locally.prototype.set=function(key,value,options){if(!key||!value)return new Error("no key or value given");switch(options=options||{},"number"==typeof options?options={ttl:options}:"string"==typeof options&&(options={ttl:ms(options)}),_config[key]=_config[key]||{},-1==_keys.indexOf(key)&&(_keys.push(key),this.length=_keys.length),options.ttl&&!isNaN(options.ttl)&&(_config[key].ttl=Date.now()+options.ttl),typeof value){case"object":value instanceof Date?(value=value.getTime(),_config[key].t="d"):value instanceof RegExp?(value=value.toString(),_config[key].t="r"):(value=JSON.stringify(value),_config[key].t="o");break;case"function":_config[key].t="f";break;case"number":_config[key].t="n";break;case"boolean":value=value?1:0,_config[key].t="b";break;case"string":default:_config[key].t="s"}ls.setItem(key,value),_saveConfig()},Locally.prototype.get=function(key){return Array.isArray(key)?utils.map(key,function(item){return _get(item)}.bind(this)):_get(key)},Locally.prototype.keys=function(pattern){return pattern&&"*"!=pattern?(pattern instanceof RegExp||(pattern=new RegExp(".*"+pattern+".*")),utils.filter(_keys,function(key){return pattern.test(key)})):_keys.slice(0)},Locally.prototype.remove=function(key){if("undefined"==typeof key)throw new Error("'remove' requires a key");Array.isArray(key)?utils.each(key,_remove):_remove(key)},Locally.prototype.scan=function(key,fn){return utils.each(this.keys(key),fn)},Locally.prototype.ttl=function(key){return _config[key]?_config[key].ttl?_config[key].ttl-Date.now():-1:-2},Locally.prototype.persist=function(key){return _config[key]?delete _config[key].ttl&&_saveConfig():!1},Locally.prototype.expire=function(key,ttl){return _config[key]?!!(_config[key].ttl=Date.now()+ttl)&&_saveConfig():!1},Locally.prototype.clear=function(){return ls.clear(),this.length=0,_config={},_keys=[],_saveConfig()},Locally.prototype.key=function(index){return _keys[index]},"object"==typeof exports?module.exports.Store=Locally:"function"==typeof define&&define.amd?define(function(){return{Store:Locally}}):window.Locally={Store:Locally}}()},{ms:1}]},{},[2])(2)});